<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Phở Gà Quán</title>
<meta name="description" content="Phở Gà Quán – Đậm đà hương vị Việt. Đặt món nhanh, giỏ hàng tiện lợi, giao hàng tại Munich." />
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet" />
<meta property="og:title" content="Phở Gà Quán" />
<meta property="og:description" content="Đậm đà hương vị Việt – đặt món trực tuyến." />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/banner.jpg" />
<meta name="theme-color" content="#121212" />

<style>

  :root{--bg:#121212;--card:#1e1e1e;--txt:#eaeaea;--muted:#9aa0a6;--accent:#facc15;--radius:14px}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--txt)}
  a:focus-visible, button:focus-visible, .tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

  /* Hero */
  .hero{position:relative;height:260px;overflow:hidden;margin-bottom:16px}
  .hero img{width:100%;height:100%;object-fit:cover}
  .hero::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.55)}
  .hero-content{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1}
  .title{font-family:'Dancing Script',cursive;font-weight:700;font-size:80px;margin:0 0 12px;color:var(--accent);text-shadow:0 4px 10px rgba(0,0,0,.7)}
  @media(max-width:600px){.title{font-size:48px}}
  .tagline{font-size:18px;color:#f3f4f6;font-style:italic}
  .wrap{max-width:980px;margin:0 auto 100px;padding:0 16px}

  /* Tabs */

  /* Fly-to-cart image */

.addBtn.flash {
  background-color: #22c55e !important;
  color: #fff !important;
  box-shadow: 0 0 10px rgba(34,197,94,0.8);
  transition: all 0.3s;
}

  .fly-img{
    position:fixed;
    z-index:9999;
    pointer-events:none;
    border-radius:10px;
    box-shadow:0 8px 30px rgba(0,0,0,.35);
    transform-origin:center center;
  }

  /* Category Bar */
  .catbar{position:sticky;top:0;z-index:10;display:flex;gap:10px;overflow-x:auto;padding:8px;background:#0b0b0b;border:1px solid #1f2937;border-radius:12px;margin:12px 0}
  .catlink{flex:1;display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #334155;background:#171717;color:#e5e7eb;font-weight:700;cursor:pointer;white-space:nowrap}
  .catlink.active{background:#10b981;border-color:#0ea5a3;color:#062c2c}
  .catTitle{font-size:22px;font-weight:800;margin:24px 6px 8px;color:#e5e7eb}

  .tabs{position:sticky;top:0;z-index:5;background:#121212d9;backdrop-filter:blur(6px);border:1px solid #242424;border-radius:12px;padding:6px;display:flex;gap:6px;margin:12px 0;overflow-x:auto}
  .tab{flex:1;text-align:center;padding:10px 12px;border-radius:10px;cursor:pointer;user-select:none;border:1px solid transparent;color:#e5e7eb;white-space:nowrap}
  .tab.active{background:#0f172a;border-color:#253047}

  /* Cards */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:10px}
  .card{background:var(--card);border-radius:var(--radius);overflow:hidden}
  .thumb{width:100%;height:160px;object-fit:cover;background:#0a0a0a}
  .pad{padding:14px}
  .name{font-weight:700;margin:0 0 10px}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .price{font-weight:700}
  button{background:#2d2d2d;color:#fff;border:0;padding:8px 12px;border-radius:999px;cursor:pointer}
  button.adding{background:#22c55e!important}

  /* Cart trigger */
  .float-cart{position:fixed;right:16px;bottom:16px;z-index:50;background:#10b981;color:#000;border:0;padding:12px 16px;border-radius:999px;font-weight:700}

  /* Drawer + overlay */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:60}
  .overlay.show{display:block}
  .drawer{position:fixed;top:0;right:-540px;width:540px;max-width:92vw;height:100vh;background:#0f172a;color:#e5e7eb;z-index:70;transition:right .3s ease;display:flex;flex-direction:column}
  .drawer.open{right:0}
  .drawer header{padding:14px 16px;border-bottom:1px solid #1f2937;display:flex;align-items:center;justify-content:space-between;gap:8px}
  .drawer .content{padding:12px;overflow:auto;flex:1;padding-bottom:180px}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:#253047;color:#e5e7eb;border:1px solid #334155;padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.danger{background:#7f1d1d;border-color:#991b1b}
  .btn.primary{background:#10b981;border-color:#0ea5a3;color:#062c2c;font-weight:700}

  /* Cart item */
  .cItem{display:grid;grid-template-columns:80px 1fr auto auto auto;align-items:flex-start;gap:10px;padding:10px 8px;border-bottom:1px dashed #1f2937}
  .cItem img{width:80px;height:80px;object-fit:cover;border-radius:10px}
  .qty{display:flex;align-items:center;gap:6px}
  .qty input{width:64px;padding:6px 8px;background:#0b1220;color:#fff;border:1px solid #253047;border-radius:8px;text-align:center}

  /* Total box fixed bottom */
  .totalBox{position:fixed;right:-540px;width:540px;max-width:92vw;bottom:0;z-index:75;background:#0b1220;border-top:1px solid #1f2937;padding:12px}
  .totalRow{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
  .totalBox.open{right:0}

  .totalBox label{display:block;font-size:14px;color:#9aa0a6;margin-top:8px}
  .totalBox textarea{width:100%;min-height:68px;resize:vertical;background:#0b1220;color:#e5e7eb;border:1px solid #253047;border-radius:8px;padding:8px;margin-top:6px}

  .empty{padding:16px;text-align:center;color:#9aa0a6}
  .chip{position:fixed;z-index:80;background:#10b981;color:#000;padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,.35)}

  /* Footer */
  .site-footer{background:#171717;color:#e5e5e5;margin-top:48px}
  .site-footer .inner{max-width:980px;margin:0 auto;padding:36px 16px 20px}
  .footer-grid{display:grid;grid-template-columns:1.2fr 1fr;gap:18px}
  .footer-col h4{margin:0 0 10px}
  .footer-list{margin:0;padding:0;list-style:none}
  .footer-list li{margin:8px 0}
  .footer-list a{color:#cbd5e1;text-decoration:none}
  .footer-list a:hover{color:#ffffff}
  .footer-note{border-top:1px solid #242424;margin-top:24px;padding-top:16px;font-size:14px;color:#9aa0a6;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .brand-mark{color:inherit;font-weight:700}

  @media(prefers-reduced-motion:reduce){
    *{scroll-behavior:auto!important}
    .drawer{transition:none}
  }


/* Order form + summary (from old order) */

    :root{--bg:#121212;--card:#1e1e1e;--text:#eaeaea;--muted:#9aa0a6;--border:#242424;--brand:#10b981}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    a{color:var(--brand);}
    header{position:sticky;top:0;background:linear-gradient(180deg,rgba(18,18,18,1),rgba(18,18,18,.9));border-bottom:1px solid var(--border);backdrop-filter:blur(8px)}
    .wrap{max-width:980px;margin:0 auto;padding:16px}
    h1{font-size:24px;margin:8px 0 0}
    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:16px;margin-top:16px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.24)}
    label{display:block;margin:8px 0 6px;color:#d1d5db}
    input, textarea{width:100%;background:#1a1a1a;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px;outline:none;}
    input:focus, textarea:focus{border-color:#2dd4bf;box-shadow:0 0 0 3px rgba(45,212,191,.2);background:#1a1a1a;}
    textarea{min-height:90px;resize:vertical}
    .totalRow{display:flex;justify-content:space-between;margin:6px 0;font-weight:600}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;border-radius:12px;border:1px solid var(--border);padding:10px 14px;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:transparent;color:black;font-weight:700}
    .btn.secondary{background:transparent;color:var(--text)}
    .muted{color:var(--muted)}
    .list{max-height:340px;overflow:auto;border-top:1px dashed var(--border);margin-top:10px;padding-top:10px}
    .line{display:flex;justify-content:space-between;margin:6px 0}
    footer{color:var(--muted);border-top:1px solid var(--border);margin-top:20px;padding:16px 0;font-size:14px}
    @media (max-width: 760px){ .grid{grid-template-columns:1fr} }
  
  
</style>
</head>
<body>
  <!-- Banner -->
  <div class="hero" aria-label="Ảnh bìa quán">
    <img src="images/banner.jpg" alt="Phở Gà Quán" onerror="this.src='images/placeholder.jpg'" width="1600" height="320" />
    <div class="hero-content" aria-hidden="true">
      <h1 class="title">Phở Gà Quán</h1>
      <p class="tagline">Đậm đà hương vị Việt</p>
    </div>
  </div>
    <div class="totalRow"><span></div>
        <div class="totalRow" style="font-size:18px"><span></button>
    </div>
  </div>

<main class="wrap">
    <div class="grid">
      <section class="card">
        <h2>Thông tin người nhận</h2>
        <form id="orderForm" onsubmit="return false;">
          <label for="fullName">Họ tên</label>
          <input id="fullName" autocomplete="name" required />

          <label for="phone">Số điện thoại</label>
          <input id="phone" autocomplete="tel" />

          <label for="email">Email (nhận xác nhận)</label>
          <input id="email" type="email" autocomplete="email" />

          <label for="note">Ghi chú</label>
          <textarea id="note"></textarea>

          <div style="display:flex;gap:8px;margin-top:10px">
            <button id="backBtn" class="btn secondary" type="button">Quay lại giỏ</button>
            <button id="submitBtn" class="btn primary" type="button">Gửi đơn qua Email</button>
          </div>
          <p class="muted" style="margin-top:8px">Chúng tôi sẽ gọi xác nhận nếu cần. Bạn sẽ dùng app email của mình để gửi đơn.</p>
        </form>
      </section>

      <section class="card">
        <h2>Tóm tắt đơn hàng</h2>
        <div id="summary">
          <div class="muted">Đang tải giỏ hàng…</div>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="inner">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>Thông tin liên hệ</h4>
          <ul class="footer-list">
            
            <li>📍 <strong>Địa chỉ:</strong>
              <a href="https://www.google.com/maps?q=Connollystr.+3,+80809+Munich" target="_blank" rel="noopener noreferrer">
                Connollystr. 3, 80809 Munich
              </a>
            </li>
            <li>📞 <strong>Điện thoại:</strong> <a href="tel:+4915906380849">+49 (0) 159-06380849</a></li>
            <li>✉️ <strong>Email:</strong> <a href="mailto:vudo805@gmail.com">vudo805@gmail.com</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Liên kết nhanh</h4>
          <ul class="footer-list">
            <li><a href="#khai-vi">Menu</a></li>
            <li><a href="#" onclick="document.getElementById('openCartBtn').click();return false;">Giỏ hàng</a></li>
            <li><a id="privacyLink" href="privacy_policy.html" target="_self" rel="noopener" onclick="window.location.href='privacy_policy.html'; return false;">Chính sách &amp; Quyền riêng tư</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-note">
        <div>© <span class="brand-mark">Phở Gà Quán</span></div>
        <div>Munich, Germany</div>
      </div>
    </div>
  </footer>

<script>
(function(){
  const a = document.getElementById('privacyLink');
  if(!a) return;
  a.addEventListener('click', function(e){
    try{ e.preventDefault(); }catch(_){}
    window.location.assign('privacy_policy.html');
  });
})();
</script>

<script>
  const VND = new Intl.NumberFormat('vi-VN', { style:'currency', currency:'VND', maximumFractionDigits:0 });

  // Đọc giỏ từ localStorage hoặc hash (?/#cart=...)
  function loadCart(){
    try{ const primary = localStorage.getItem('cart_phoga'); if(primary && primary!=='[]') return JSON.parse(primary); }catch{}
    try{ const alt = localStorage.getItem('cart'); if(alt && alt!=='[]') return JSON.parse(alt); }catch{}
    try{ 
      const paramsHash = new URLSearchParams(location.hash.slice(1));
      const paramsQuery = new URLSearchParams(location.search.slice(1));
      const packed = paramsHash.get('cart') || paramsQuery.get('cart');
      if(packed){ const arr = JSON.parse(decodeURIComponent(packed)); localStorage.setItem('cart_phoga', JSON.stringify(arr)); return arr; }
    }catch{}
    return [];
  }

  // Tính phí: ship 15k, free nếu >= 200k
  function totals(cart){
    let subtotal = cart.reduce((s,x)=> s + x.price*x.qty, 0);
    let ship = (subtotal >= 200000 ? 0 : 15000);
    let grand = subtotal + ship;
    return { subtotal, ship, grand };
  }

  function renderSummary(){
    try{
      const el = document.getElementById('summary');
      const cart = loadCart();
      if(!cart.length){ el.innerHTML = '<div class="muted">Giỏ hàng trống. Vui lòng quay lại để chọn món.</div>'; return; }
      const t = totals(cart);
      const list = cart.map(x=>`<div class="line"><span>${x.name} × ${x.qty}</span><strong>${VND.format(x.price*x.qty)}<\/strong><\/div>`).join('');
      el.innerHTML = `
        <div class="list">${list}<\/div>
        <hr style="border:none;border-top:1px dashed var(--border);margin:8px 0">
        <div class="totalRow"><span>Tạm tính<\/span><span>${VND.format(t.subtotal)}<\/span><\/div>
        <div class="totalRow"><span>Phí giao<\/span><span>${VND.format(t.ship)}<\/span><\/div>
        <div class="totalRow" style="font-size:18px"><span>Tổng cộng<\/span><span>${VND.format(t.grand)}<\/span><\/div>
      `;
    }catch(e){ console.error(e); }
  }

  // Prefill
  (function(){ try{ const s = JSON.parse(localStorage.getItem('customer_phoga')||'{}'); 
    if(s.fullName) document.getElementById('fullName').value = s.fullName;
    if(s.phone) document.getElementById('phone').value = s.phone;
    if(s.email) document.getElementById('email').value = s.email;
    if(s.note) document.getElementById('note').value = s.note; }catch{} })();

  document.getElementById('backBtn').onclick = () => { window.location.href = 'index.html#checkout'; };

  // Gửi qua email (CRLF cho mobile)
  document.getElementById('submitBtn').onclick = () => {
    const cart = loadCart();
    if(!cart.length){ alert('Giỏ hàng đang trống.'); return; }
    const customer = {
      fullName: document.getElementById('fullName').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      email: document.getElementById('email').value.trim(),
      note: document.getElementById('note').value.trim(),
    };
    if(!customer.fullName){ alert('Vui lòng nhập họ tên.'); return; }
    try{ localStorage.setItem('customer_phoga', JSON.stringify(customer)); }catch{}

    const t = totals(cart);
    const lines = cart.map(x=>`- ${x.name} x${x.qty} = ${VND.format(x.price*x.qty)}`).join('\r\n');
    const body = [
      'Xin chào Phở Gà Quán,','',
      'Mình muốn đặt:','',lines,'',
      `Tạm tính: ${VND.format(t.subtotal)}`,
      `Phí giao: ${VND.format(t.ship)}`,
      `Tổng cộng: ${VND.format(t.grand)}`,'',
      'Thông tin giao hàng:',
      `Họ tên: ${customer.fullName}`,
      `SĐT: ${customer.phone}`,
      `Email: ${customer.email||''}`,
      `Ghi chú: ${customer.note||''}`,'',
      'Gửi từ website.'
    ].join('\r\n');

    const subject = 'Đơn hàng mới - Phở Gà Quán';
    const EMAIL_TO = 'vudo805@gmail.com';
    const mailto = `mailto:${encodeURIComponent(EMAIL_TO)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = mailto;
  };

  // Gọi khi DOM sẵn sàng (phòng khi script không chạy vì lý do thứ tự)
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', renderSummary);
  } else {
    renderSummary();
  }
  </script>
<script>
document.getElementById('submitBtn').onclick = async () => {
  const cart = loadCart();
  if(!cart.length){ alert('Giỏ hàng đang trống.'); return; }

  const customer = {
    fullName: document.getElementById('fullName').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    email: document.getElementById('email').value.trim(),
    note: document.getElementById('note').value.trim(),
  };
  if(!customer.fullName){ alert('Vui lòng nhập họ tên.'); return; }
  try{ localStorage.setItem('customer_phoga', JSON.stringify(customer)); }catch{}

  const t = totals(cart);
  const VND = new Intl.NumberFormat('vi-VN', { style:'currency', currency:'VND', maximumFractionDigits:0 });
  const lines = cart.map(x=>`- ${x.name} x${x.qty} = ${VND.format(x.price*x.qty)}`).join('\\n');
  const body = [
    'Xin chào Phở Gà Quán,','',
    'Mình muốn đặt:','',lines,'',
    `Tạm tính: ${VND.format(t.subtotal)}`,
    `Phí giao: ${VND.format(t.ship)}`,
    `Tổng cộng: ${VND.format(t.grand)}`,'',
    'Thông tin giao hàng:',
    `Họ tên: ${customer.fullName}`,
    `SĐT: ${customer.phone}`,
    `Email: ${customer.email||''}`,
    `Ghi chú: ${customer.note||''}`,'',
    'Gửi từ website.'
  ].join('\\n');

  // 👉 DÁN URL Apps Script Web App của m vào đây
  const ENDPOINT = "https://script.google.com/macros/s/PASTE_YOUR_ID/exec";

  const btn = document.getElementById('submitBtn');
  const oldText = btn.textContent;
  btn.disabled = true;
  btn.textContent = 'Đang gửi...';

  try{
    const res = await fetch(ENDPOINT, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ subject: "Đơn hàng mới - Phở Gà Quán", body })
    });
    const txt = await res.text();
    if (res.ok && txt.trim() === "OK"){
      try{ localStorage.removeItem('cart_phoga'); localStorage.removeItem('cart'); }catch{}
      alert("Đã gửi đơn thành công!");
    }else{
      alert("Gửi thất bại: " + txt);
    }
  }catch(err){
    console.error(err);
    alert("Gửi thất bại. Kiểm tra endpoint/kết nối.");
  } finally {
    btn.disabled = false;
    btn.textContent = oldText;
  }
};
</script>
</body>
</html>
