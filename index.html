<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ph·ªü G√† Qu√°n</title>
<meta name="description" content="Ph·ªü G√† Qu√°n ‚Äì ƒê·∫≠m ƒë√† h∆∞∆°ng v·ªã Vi·ªát. ƒê·∫∑t m√≥n nhanh, gi·ªè h√†ng ti·ªán l·ª£i, giao h√†ng t·∫°i Munich." />
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet" />
<meta property="og:title" content="Ph·ªü G√† Qu√°n" />
<meta property="og:description" content="ƒê·∫≠m ƒë√† h∆∞∆°ng v·ªã Vi·ªát ‚Äì ƒë·∫∑t m√≥n tr·ª±c tuy·∫øn." />
<meta property="og:type" content="website" />
<meta property="og:image" content="images/banner.jpg" />
<meta name="theme-color" content="#121212" />

<style>
  :root{--bg:#121212;--card:#1e1e1e;--txt:#eaeaea;--muted:#9aa0a6;--accent:#facc15;--radius:14px}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--txt)}
  a:focus-visible, button:focus-visible, .tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

  /* Hero */
  .hero{position:relative;height:260px;overflow:hidden;margin-bottom:16px}
  .hero img{width:100%;height:100%;object-fit:cover}
  .hero::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,.55)}
  .hero-content{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1}
  .title{font-family:'Dancing Script',cursive;font-weight:700;font-size:80px;margin:0 0 12px;color:var(--accent);text-shadow:0 4px 10px rgba(0,0,0,.7)}
  @media(max-width:600px){.title{font-size:48px}}
  .tagline{font-size:18px;color:#f3f4f6;font-style:italic}
  .wrap{max-width:980px;margin:0 auto 100px;padding:0 16px}

  /* Tabs */

  /* Fly-to-cart image */

.addBtn.flash {
  background-color: #22c55e !important;
  color: #fff !important;
  box-shadow: 0 0 10px rgba(34,197,94,0.8);
  transition: all 0.3s;
}

  .fly-img{
    position:fixed;
    z-index:9999;
    pointer-events:none;
    border-radius:10px;
    box-shadow:0 8px 30px rgba(0,0,0,.35);
    transform-origin:center center;
  }

  /* Category Bar */
  .catbar{position:sticky;top:0;z-index:10;display:flex;gap:10px;overflow-x:auto;padding:8px;background:#0b0b0b;border:1px solid #1f2937;border-radius:12px;margin:12px 0}
  .catlink{flex:1;display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #334155;background:#171717;color:#e5e7eb;font-weight:700;cursor:pointer;white-space:nowrap}
  .catlink.active{background:#10b981;border-color:#0ea5a3;color:#062c2c}
  .catTitle{font-size:22px;font-weight:800;margin:24px 6px 8px;color:#e5e7eb}

  .tabs{position:sticky;top:0;z-index:5;background:#121212d9;backdrop-filter:blur(6px);border:1px solid #242424;border-radius:12px;padding:6px;display:flex;gap:6px;margin:12px 0;overflow-x:auto}
  .tab{flex:1;text-align:center;padding:10px 12px;border-radius:10px;cursor:pointer;user-select:none;border:1px solid transparent;color:#e5e7eb;white-space:nowrap}
  .tab.active{background:#0f172a;border-color:#253047}

  /* Cards */
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:10px}
  .card{background:var(--card);border-radius:var(--radius);overflow:hidden}
  .thumb{width:100%;height:160px;object-fit:cover;background:#0a0a0a}
  .pad{padding:14px}
  .name{font-weight:700;margin:0 0 10px}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .price{font-weight:700}
  button{background:#2d2d2d;color:#fff;border:0;padding:8px 12px;border-radius:999px;cursor:pointer}
  button.adding{background:#22c55e!important}

  /* Cart trigger */
  .float-cart{position:fixed;right:16px;bottom:16px;z-index:50;background:#10b981;color:#000;border:0;padding:12px 16px;border-radius:999px;font-weight:700}

  /* Drawer + overlay */
  .overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:60}
  .overlay.show{display:block}
  .drawer{position:fixed;top:0;right:-540px;width:540px;max-width:92vw;height:100vh;background:#0f172a;color:#e5e7eb;z-index:70;transition:right .3s ease;display:flex;flex-direction:column}
  .drawer.open{right:0}
  .drawer header{padding:14px 16px;border-bottom:1px solid #1f2937;display:flex;align-items:center;justify-content:space-between;gap:8px}
  .drawer .content{padding:12px;overflow:auto;flex:1;padding-bottom:180px}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:#253047;color:#e5e7eb;border:1px solid #334155;padding:8px 12px;border-radius:10px;cursor:pointer}
  .btn.danger{background:#7f1d1d;border-color:#991b1b}
  .btn.primary{background:#10b981;border-color:#0ea5a3;color:#062c2c;font-weight:700}

  /* Cart item */
  .cItem{display:grid;grid-template-columns:80px 1fr auto auto auto;align-items:flex-start;gap:10px;padding:10px 8px;border-bottom:1px dashed #1f2937}
  .cItem img{width:80px;height:80px;object-fit:cover;border-radius:10px}
  .qty{display:flex;align-items:center;gap:6px}
  .qty input{width:64px;padding:6px 8px;background:#0b1220;color:#fff;border:1px solid #253047;border-radius:8px;text-align:center}

  /* Total box fixed bottom */
  .totalBox{position:fixed;right:-540px;width:540px;max-width:92vw;bottom:0;z-index:75;background:#0b1220;border-top:1px solid #1f2937;padding:12px}
  .totalRow{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
  .totalBox.open{right:0}

  .totalBox label{display:block;font-size:14px;color:#9aa0a6;margin-top:8px}
  .totalBox textarea{width:100%;min-height:68px;resize:vertical;background:#0b1220;color:#e5e7eb;border:1px solid #253047;border-radius:8px;padding:8px;margin-top:6px}

  .empty{padding:16px;text-align:center;color:#9aa0a6}
  .chip{position:fixed;z-index:80;background:#10b981;color:#000;padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;pointer-events:none;box-shadow:0 6px 18px rgba(0,0,0,.35)}

  /* Footer */
  .site-footer{background:#171717;color:#e5e5e5;margin-top:48px}
  .site-footer .inner{max-width:980px;margin:0 auto;padding:36px 16px 20px}
  .footer-grid{display:grid;grid-template-columns:1.2fr 1fr;gap:18px}
  .footer-col h4{margin:0 0 10px}
  .footer-list{margin:0;padding:0;list-style:none}
  .footer-list li{margin:8px 0}
  .footer-list a{color:#cbd5e1;text-decoration:none}
  .footer-list a:hover{color:#ffffff}
  .footer-note{border-top:1px solid #242424;margin-top:24px;padding-top:16px;font-size:14px;color:#9aa0a6;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
  .brand-mark{color:inherit;font-weight:700}

  @media(prefers-reduced-motion:reduce){
    *{scroll-behavior:auto!important}
    .drawer{transition:none}
  }
</style>
</head>
<body>
  <!-- Banner -->
  <div class="hero" aria-label="·∫¢nh b√¨a qu√°n">
    <img src="images/banner.jpg" alt="Ph·ªü G√† Qu√°n" onerror="this.src='images/placeholder.jpg'" width="1600" height="320" />
    <div class="hero-content" aria-hidden="true">
      <h1 class="title">Ph·ªü G√† Qu√°n</h1>
      <p class="tagline">ƒê·∫≠m ƒë√† h∆∞∆°ng v·ªã Vi·ªát</p>
    </div>
  </div>

  <div class="wrap">
    <!-- Category Bar -->
    <nav class="catbar" id="catbar" aria-label="Ph√¢n lo·∫°i m√≥n">
      <button class="catlink active" data-target="khai-vi">Khai v·ªã</button>
      <button class="catlink" data-target="mon-chinh">M√≥n ch√≠nh</button>
      <button class="catlink" data-target="trang-mieng">Tr√°ng mi·ªáng</button>
      <button class="catlink" data-target="nuoc-uong">N∆∞·ªõc u·ªëng</button>
    </nav>

    <!-- Tabs -->
    <section id="khai-vi"><h2 class="catTitle">Khai v·ªã</h2><div class="grid" id="grid-kv"></div></section>
<section id="mon-chinh"><h2 class="catTitle">M√≥n ch√≠nh</h2><div class="grid" id="grid-mc"></div></section>
<section id="trang-mieng"><h2 class="catTitle">Tr√°ng mi·ªáng</h2><div class="grid" id="grid-tm"></div></section>
<section id="nuoc-uong"><h2 class="catTitle">N∆∞·ªõc u·ªëng</h2><div class="grid" id="grid-nu"></div></section>
  </div>

  <button class="float-cart" id="openCartBtn" aria-haspopup="dialog" aria-controls="drawer">üõí Gi·ªè h√†ng (<span id="cartCount">0</span>)</button>

  <!-- Drawer -->
  <div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>
  <aside class="drawer" id="drawer" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
    <header>
      <h3 id="cartTitle">üõí Gi·ªè h√†ng</h3>
      <div class="actions">
        <button class="btn danger" id="clearCartBtn" aria-label="Xo√° t·∫•t c·∫£ m√≥n trong gi·ªè">Xo√° t·∫•t c·∫£</button>
        <button class="btn" id="closeCartBtn" aria-label="ƒê√≥ng gi·ªè h√†ng">ƒê√≥ng</button>
      </div>
    </header>
    <div class="content" id="cartList"><div class="empty">Gi·ªè h√†ng ƒëang tr·ªëng.</div></div>
  </aside>

  <div class="totalBox" id="totalBox" aria-live="polite">
    <div class="totalRow"><span>T·∫°m t√≠nh</span><strong id="subtotal">0 ‚Ç´</strong></div>
    <div class="totalRow"><span>Ph√≠ giao</span><strong id="ship">0 ‚Ç´</strong></div>
    <div id="shipNote" style="color:#9aa0a6;font-size:13px;margin:4px 0">Mi·ªÖn ph√≠ giao cho ƒë∆°n t·ª´ 200.000ƒë</div>
        <div class="totalRow" style="font-size:18px"><span>T·ªïng c·ªông</span><strong id="grand">0 ‚Ç´</strong></div>
    <div style="margin-top:10px;display:flex;gap:8px">
      <button class="btn primary" id="checkoutBtn" style="flex:1">ƒê·∫∑t ƒë∆°n h√†ng</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="inner">
      <div class="footer-grid">
        <div class="footer-col">
          <h4>Th√¥ng tin li√™n h·ªá</h4>
          <ul class="footer-list">
            
            <li>üìç <strong>ƒê·ªãa ch·ªâ:</strong>
              <a href="https://www.google.com/maps?q=Connollystr.+3,+80809+Munich" target="_blank" rel="noopener noreferrer">
                Connollystr. 3, 80809 Munich
              </a>
            </li>
            <li>üìû <strong>ƒêi·ªán tho·∫°i:</strong> <a href="tel:+4915906380849">+49 (0) 159-06380849</a></li>
            <li>‚úâÔ∏è <strong>Email:</strong> <a href="mailto:vudo805@gmail.com">vudo805@gmail.com</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Li√™n k·∫øt nhanh</h4>
          <ul class="footer-list">
            <li><a href="#khai-vi">Menu</a></li>
            <li><a href="#" onclick="document.getElementById('openCartBtn').click();return false;">Gi·ªè h√†ng</a></li>
            <li><a id="privacyLink" href="privacy_policy.html" target="_self" rel="noopener" onclick="window.location.href='privacy_policy.html'; return false;">Ch√≠nh s√°ch &amp; Quy·ªÅn ri√™ng t∆∞</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-note">
        <div>¬© <span class="brand-mark">Ph·ªü G√† Qu√°n</span></div>
        <div>Munich, Germany</div>
      </div>
    </div>
  </footer>

<script>
(function(){
  const PREFERS_REDUCED_MOTION = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // ===== MENU =====
  const MENU = [
        {id:'goi-cuon',name:'G·ªèi Cu·ªën',price:35000,cat:'khai-vi',imgLocal:'images/goi-cuon.jpg',desc:'b√°nh tr√°ng, t√¥m, th·ªãt, b√∫n, rau s·ªëng'},
    {id:'nem-ran',name:'Nem R√°n',price:40000,cat:'khai-vi',imgLocal:'images/nem-ran.jpg',desc:'v·ªè b√°nh, th·ªãt heo, mi·∫øn, m·ªôc nhƒ©'},
    {id:'sup-cua',name:'S√∫p Cua',price:35000,cat:'khai-vi',imgLocal:'images/sup-cua.jpg',desc:'cua, n·∫•m, tr·ª©ng'},
    {id:'nom-ga',name:'N·ªôm G√†',price:42000,cat:'khai-vi',imgLocal:'images/nom-ga.jpg',desc:'g√† x√©, b·∫Øp c·∫£i, c√† r·ªët, rau rƒÉm'},
    {id:'nom-xoai',name:'N·ªôm Xo√†i',price:38000,cat:'khai-vi',imgLocal:'images/nom-xoai.jpg',desc:'xo√†i xanh, t√¥m kh√¥, ƒë·∫≠u ph·ªông, rau th∆°m'},
    {id:'banh-trang-tron',name:'B√°nh Tr√°ng Tr·ªôn',price:35000,cat:'khai-vi',imgLocal:'images/banh-trang-tron.jpg',desc:'b√°nh tr√°ng, b√≤ kh√¥, tr·ª©ng c√∫t, xo√†i'},
    {id:'xien-ban',name:'Xi√™n B·∫©n',price:30000,cat:'khai-vi',imgLocal:'images/xien-ban.jpg',desc:'x√∫c x√≠ch, c√° vi√™n, b√≤ vi√™n'},
    {id:'pho-ga',name:'Ph·ªü G√†',price:40000,cat:'mon-chinh',imgLocal:'images/pho-ga.jpg',desc:'b√°nh ph·ªü, g√†, rau m√πi, h√†nh hoa'},
    {id:'pho-bo',name:'Ph·ªü B√≤',price:45000,cat:'mon-chinh',imgLocal:'images/pho-bo.jpg',desc:'b√°nh ph·ªü, b√≤, rau m√πi, h√†nh hoa'},
    {id:'bun-bo-hue',name:'B√∫n B√≤ Hu·∫ø',price:55000,cat:'mon-chinh',imgLocal:'images/bun-bo-hue.jpg',desc:'b√∫n, b√≤, ch·∫£ l·ª•a, rau th∆°m'},
    {id:'bun-rieu-cua',name:'B√∫n Ri√™u Cua',price:52000,cat:'mon-chinh',imgLocal:'images/bun-rieu-cua.jpg',desc:'b√∫n, ri√™u cua, ƒë·∫≠u h≈©, c√† chua'},
    {id:'bun-thang',name:'B√∫n Thang H√† N·ªôi',price:52000,cat:'mon-chinh',imgLocal:'images/bun-thang.jpg',desc:'b√∫n, g√† x√©, tr·ª©ng, gi√≤ l·ª•a'},
    {id:'bun-moc',name:'B√∫n M·ªçc',price:50000,cat:'mon-chinh',imgLocal:'images/bun-moc.jpg',desc:'b√∫n, m·ªçc (gi√≤), n·∫•m, h√†nh hoa'},
    {id:'bun-cha-ca',name:'B√∫n Ch·∫£ C√°',price:52000,cat:'mon-chinh',imgLocal:'images/bun-cha-ca.jpg',desc:'b√∫n, ch·∫£ c√°, rau s·ªëng'},
    {id:'bun-mam',name:'B√∫n M·∫Øm',price:56000,cat:'mon-chinh',imgLocal:'images/bun-mam.jpg',desc:'b√∫n, h·∫£i s·∫£n, rau s·ªëng'},
    {id:'bun-thit-nuong',name:'B√∫n Th·ªãt N∆∞·ªõng',price:52000,cat:'mon-chinh',imgLocal:'images/bun-thit-nuong.jpg',desc:'b√∫n, th·ªãt n∆∞·ªõng, rau s·ªëng, ƒë·∫≠u ph·ªông'},
    {id:'bun-cha',name:'B√∫n Ch·∫£',price:50000,cat:'mon-chinh',imgLocal:'images/bun-cha.jpg',desc:'b√∫n, ch·∫£ th·ªãt n∆∞·ªõng, rau s·ªëng'},
    {id:'hu-tieu-nam-vang',name:'H·ªß Ti·∫øu Nam Vang',price:52000,cat:'mon-chinh',imgLocal:'images/hu-tieu-nam-vang.jpg',desc:'h·ªß ti·∫øu, t√¥m, th·ªãt heo, h·∫π'},
    {id:'hu-tieu-kho',name:'H·ªß Ti·∫øu Kh√¥',price:52000,cat:'mon-chinh',imgLocal:'images/hu-tieu-kho.jpg',desc:'h·ªß ti·∫øu, t√¥m, th·ªãt heo, rau s·ªëng'},
    {id:'com-tam',name:'C∆°m T·∫•m',price:55000,cat:'mon-chinh',imgLocal:'images/com-tam.jpg',desc:'c∆°m t·∫•m, s∆∞·ªùn n∆∞·ªõng, b√¨, ch·∫£'},
    {id:'com-chien-duong-chau',name:'C∆°m Chi√™n D∆∞∆°ng Ch√¢u',price:52000,cat:'mon-chinh',imgLocal:'images/com-chien-duong-chau.jpg',desc:'c∆°m chi√™n, tr·ª©ng, t√¥m, ƒë·∫≠u h√† lan'},
    {id:'banh-xeo',name:'B√°nh X√®o',price:52000,cat:'mon-chinh',imgLocal:'images/banh-xeo.jpg',desc:'b·ªôt b√°nh, t√¥m, th·ªãt heo, gi√°'},
    {id:'banh-khot',name:'B√°nh Kh·ªçt',price:52000,cat:'mon-chinh',imgLocal:'images/banh-khot.jpg',desc:'b·ªôt b√°nh, t√¥m, m·ª° h√†nh'},
    {id:'banh-cuon',name:'B√°nh Cu·ªën',price:45000,cat:'mon-chinh',imgLocal:'images/banh-cuon.jpg',desc:'b√°nh cu·ªën, th·ªãt bƒÉm, m·ªôc nhƒ©, h√†nh phi'},
    {id:'banhmi-db',name:'B√°nh m√¨ ƒê·∫∑c Bi·ªát',price:35000,cat:'mon-chinh',imgLocal:'images/banhmi-db.jpg',desc:'b√°nh m√¨, th·ªãt ngu·ªôi, pate, d∆∞a leo'},
    {id:'cha-ca-la-vong',name:'Ch·∫£ C√° L√£ V·ªçng',price:65000,cat:'mon-chinh',imgLocal:'images/cha-ca-la-vong.jpg',desc:'c√°, th√¨ l√†, h√†nh l√°, b√∫n'},
    {id:'vit-om-sau',name:'V·ªãt Om S·∫•u',price:68000,cat:'mon-chinh',imgLocal:'images/vit-om-sau.jpg',desc:'v·ªãt, s·∫•u, rau th∆°m'},
    {id:'canh-muop-dang-nhoi-thit',name:'Canh M∆∞·ªõp ƒê·∫Øng Nh·ªìi Th·ªãt',price:45000,cat:'mon-chinh',imgLocal:'images/canh-muop-dang-nhoi-thit.jpg',desc:'m∆∞·ªõp ƒë·∫Øng, th·ªãt heo xay, n·∫•m m√®o'},
    {id:'dau-hu-sot-ca',name:'ƒê·∫≠u H≈© S·ªët C√† Chua',price:42000,cat:'mon-chinh',imgLocal:'images/dau-hu-sot-ca.jpg',desc:'ƒë·∫≠u h≈©, c√† chua, h√†nh'},
    {id:'lau-thai',name:'L·∫©u Th√°i',price:150000,cat:'mon-chinh',imgLocal:'images/lau-thai.jpg',desc:'h·∫£i s·∫£n, n·∫•m, rau'},
    {id:'lau-ca',name:'L·∫©u C√°',price:140000,cat:'mon-chinh',imgLocal:'images/lau-ca.jpg',desc:'c√°, rau, b√∫n'},
    {id:'lau-nam',name:'L·∫©u N·∫•m',price:130000,cat:'mon-chinh',imgLocal:'images/lau-nam.jpg',desc:'n·∫•m t·ªïng h·ª£p, rau, ƒë·∫≠u h≈©'},
    {id:'che-buoi',name:'Ch√® B∆∞·ªüi',price:25000,cat:'trang-mieng',imgLocal:'images/che-buoi.jpg',desc:'b∆∞·ªüi, ƒë·∫≠u xanh, n∆∞·ªõc c·ªët d·ª´a'},
    {id:'che-thai',name:'Ch√® Th√°i',price:28000,cat:'trang-mieng',imgLocal:'images/che-thai.jpg',desc:'th·∫°ch, tr√°i c√¢y, s·ªØa'},
    {id:'che-thap-cam',name:'Ch√® Th·∫≠p C·∫©m',price:25000,cat:'trang-mieng',imgLocal:'images/che-thap-cam.jpg',desc:'ƒë·∫≠u ƒë·ªè, ƒë·∫≠u xanh, th·∫°ch, n∆∞·ªõc c·ªët d·ª´a'},
    {id:'che-khuc-bach',name:'Ch√® Kh√∫c B·∫°ch',price:30000,cat:'trang-mieng',imgLocal:'images/che-khuc-bach.jpg',desc:'th·∫°ch ph√¥ mai, nh√£n, h·∫°nh nh√¢n l√°t'},
    {id:'banh-flan',name:'B√°nh Flan',price:20000,cat:'trang-mieng',imgLocal:'images/banh-flan.jpg',desc:'tr·ª©ng, s·ªØa, caramel'},
    {id:'tra-sua',name:'Tr√† S·ªØa',price:25000,cat:'nuoc-uong',imgLocal:'images/tra-sua.jpg',desc:'tr√† ƒëen, s·ªØa, tr√¢n ch√¢u'},
    {id:'tra-chanh',name:'Tr√† Chanh',price:18000,cat:'nuoc-uong',imgLocal:'images/tra-chanh.jpg',desc:'tr√†, chanh, ƒë∆∞·ªùng'},
    {id:'nuoc-chanh',name:'N∆∞·ªõc Chanh',price:18000,cat:'nuoc-uong',imgLocal:'images/nuoc-chanh.jpg',desc:'chanh, ƒë∆∞·ªùng, n∆∞·ªõc'},
    {id:'nuoc-mia',name:'N∆∞·ªõc M√≠a',price:20000,cat:'nuoc-uong',imgLocal:'images/nuoc-mia.jpg',desc:'m√≠a √©p'},
    {id:'sinh-to',name:'Sinh T·ªë',price:30000,cat:'nuoc-uong',imgLocal:'images/sinh-to.jpg',desc:'tr√°i c√¢y, s·ªØa, ƒë√°'},
    {id:'nuoc-trai-cay',name:'N∆∞·ªõc Tr√°i C√¢y',price:22000,cat:'nuoc-uong',imgLocal:'images/nuoc-trai-cay.jpg',desc:'tr√°i c√¢y, n∆∞·ªõc'},
    {id:'sua-dau-nanh',name:'S·ªØa ƒê·∫≠u N√†nh',price:15000,cat:'nuoc-uong',imgLocal:'images/sua-dau-nanh.jpg',desc:'ƒë·∫≠u n√†nh, n∆∞·ªõc'},
    {id:'sua-bap',name:'S·ªØa B·∫Øp',price:20000,cat:'nuoc-uong',imgLocal:'images/sua-bap.jpg',desc:'b·∫Øp, s·ªØa'},
    {id:'sua-chua-da',name:'S·ªØa Chua ƒê√°',price:20000,cat:'nuoc-uong',imgLocal:'images/sua-chua-da.jpg',desc:'s·ªØa chua, ƒë√°'}
  ];
window.MENU = MENU;

  const VND = new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'});

  // Elements
  const grid = document.getElementById('menuGrid');  const openBtn = document.getElementById('openCartBtn');
  const drawer  = document.getElementById('drawer');
  const overlay = document.getElementById('overlay');
  const totalBox= document.getElementById('totalBox');
  const cartList= document.getElementById('cartList');const cartCountEl = document.getElementById('cartCount');

  // Helpers
  function imgLocalOnly(src, alt=''){
    const img=document.createElement('img');
    img.className='thumb';
    img.src=src; img.alt=alt; img.loading='lazy'; img.width=320; img.height=160;
    img.onerror=()=>{img.onerror=null;img.src='images/placeholder.jpg';};
    return img;
  }

  
  // Render menu
  let activeCat='all';
  
function renderMenu(){
  const containers = {
    'khai-vi': document.getElementById('grid-kv'),
    'mon-chinh': document.getElementById('grid-mc'),
    'trang-mieng': document.getElementById('grid-tm'),
    'nuoc-uong': document.getElementById('grid-nu')
  };
  Object.values(containers).forEach(c=>{ if(c) c.innerHTML=''; });
  MENU.forEach(m=>{
    const c = containers[m.cat];
    if(!c) return;
    const card=document.createElement('div'); card.className='card';
    card.appendChild(imgLocalOnly(m.imgLocal, m.name));
    const pad=document.createElement('div'); pad.className='pad';
    pad.innerHTML=`
      <h3 class="name">${m.name}</h3>
      <div class="row">
        <span class="price">${VND.format(m.price)}</span>
        <button class="addBtn" aria-label="Th√™m ${m.name} v√†o gi·ªè">ƒê·∫∑t</button>
      </div>`;
    pad.querySelector('.addBtn').onclick=(e)=>clickAdd(e.currentTarget,m);
    card.appendChild(pad); c.appendChild(card);
  });
}

  
  // ==== Scrollspy for category bar ====
  const catbar = document.getElementById('catbar');
  const links = Array.from(document.querySelectorAll('.catlink'));
  function setActive(id){
    links.forEach(l=>l.classList.toggle('active', l.dataset.target===id));
  }
  // Smooth scroll on click
  links.forEach(l=>{
    l.addEventListener('click', (e)=>{
      e.preventDefault();
      const id = l.dataset.target;
      const sec = document.getElementById(id);
      if(!sec) return;
      const y = sec.getBoundingClientRect().top + window.pageYOffset - (catbar?.offsetHeight||0) - 6;
      window.scrollTo({top:y, behavior:'smooth'});
      setActive(id);
      history.replaceState(null, '', '#'+id);
    });
  });
  // Observe sections as they enter viewport
  const sectionIds = ['khai-vi','mon-chinh','trang-mieng','nuoc-uong'];
  const observer = new IntersectionObserver((entries)=>{
    // pick the entry with largest intersection ratio that's intersecting
    let best = null, score = 0;
    entries.forEach(en=>{
      if(!en.isIntersecting) return;
      if(en.intersectionRatio > score){ score = en.intersectionRatio; best = en.target; }
    });
    if(best) setActive(best.id);
  }, {root:null, rootMargin:'-40% 0px -50% 0px', threshold:[0,0.25,0.5,0.75,1]});
  sectionIds.forEach(id=>{
    const el = document.getElementById(id);
    if(el) observer.observe(el);
  });

  // Cart
  let cart = JSON.parse(localStorage.getItem('cart_phoga')||'[]');
  function save(){ localStorage.setItem('cart_phoga',JSON.stringify(cart)); }
  function addToCart(item){ const f=cart.find(x=>x.id===item.id); if(f) f.qty++; else cart.push({...item,qty:1}); save(); renderCart(); }
  function removeItem(id){ cart=cart.filter(x=>x.id!==id); save(); renderCart(); }
  function clearCart(){ cart=[]; save(); renderCart(); }
  function updateQty(id,qty){ const it=cart.find(x=>x.id===id); if(it){ it.qty=Math.max(1,Number(qty)||1); save(); renderCart(); } }

  // Shipping logic (free ship khi >= 200,000ƒë, ng∆∞·ª£c l·∫°i 15,000ƒë)
  function totals(){
    const subtotal=cart.reduce((s,x)=>s+x.price*x.qty,0);
    const ship = subtotal===0 ? 0 : (subtotal>=200000 ? 0 : 15000);
    return {subtotal, ship, grand: subtotal+ship};
  }function renderCart(){
    if(cart.length===0){ cartList.innerHTML='<div class="empty">Gi·ªè h√†ng ƒëang tr·ªëng.</div>'; }
    else{
      cartList.innerHTML='';
      cart.forEach(it=>{
        const row=document.createElement('div'); row.className='cItem';
        const thumb=document.createElement('img'); thumb.src=it.imgLocal; thumb.alt=it.name; thumb.loading='lazy'; thumb.width=80; thumb.height=80; thumb.onerror=()=>thumb.src='images/placeholder.jpg';
        row.appendChild(thumb);

        const meta=document.createElement('div'); meta.className='meta';
        const mt=document.createElement('div'); mt.style.fontWeight='700'; mt.style.lineHeight='1.3'; mt.style.wordBreak='break-word'; mt.textContent=it.name;
        const mp=document.createElement('div'); mp.style.color='#9aa0a6'; mp.style.marginTop='2px'; mp.textContent=VND.format(it.price);
        meta.append(mt, mp); row.appendChild(meta);

        const qty=document.createElement('div'); qty.className='qty';
        qty.innerHTML=`<button class="btn" data-minus aria-label="Gi·∫£m s·ªë l∆∞·ª£ng">-</button><input type="number" min="1" value="${it.qty}" aria-label="S·ªë l∆∞·ª£ng ${it.name}"><button class="btn" data-plus aria-label="TƒÉng s·ªë l∆∞·ª£ng">+</button>`;
        row.appendChild(qty);

        const line=document.createElement('div'); line.style.width='92px'; line.style.textAlign='right'; line.style.fontWeight='700'; line.textContent=VND.format(it.price*it.qty); row.appendChild(line);

        const del=document.createElement('button'); del.className='btn danger'; del.textContent='‚úï'; del.setAttribute('aria-label',`Xo√° ${it.name}`); del.onclick=()=>removeItem(it.id); row.appendChild(del);

        qty.querySelector('[data-minus]').onclick=()=>updateQty(it.id,it.qty-1);
        qty.querySelector('[data-plus]').onclick =()=>updateQty(it.id,it.qty+1);
        qty.querySelector('input').onchange=e=>updateQty(it.id,e.target.value);

        cartList.appendChild(row);
      });
    }
    const t=totals();
    document.getElementById('subtotal').textContent=VND.format(t.subtotal);
    document.getElementById('ship').textContent=VND.format(t.ship);
    document.getElementById('grand').textContent=VND.format(t.grand);

    const shipNote = document.getElementById('shipNote');
    if(shipNote){
      shipNote.style.display = (t.subtotal >= 200000 ? 'none' : 'block');
    }
    const count = cart.reduce((s,x)=>s+x.qty,0);
    cartCountEl.textContent = count;
    openBtn.setAttribute('aria-label',`M·ªü gi·ªè h√†ng (${count} m√≥n)`);
    syncCartPadding();
  }

  // Open/Close cart + focus trap
  let lastFocused = null;
  function openCart(){
    lastFocused = document.activeElement;
    drawer.classList.add('open'); overlay.classList.add('show'); totalBox.classList.add('open');
    overlay.setAttribute('aria-hidden','false');
    const firstFocus = drawer.querySelector('button, [href], input, textarea');
    firstFocus && firstFocus.focus();
    syncCartPadding();
  }
  function closeCart(){
    drawer.classList.remove('open'); overlay.classList.remove('show'); totalBox.classList.remove('open');
    overlay.setAttribute('aria-hidden','true');
    lastFocused && lastFocused.focus();
  }
  document.getElementById('closeCartBtn').onclick=closeCart; overlay.onclick=closeCart; openBtn.onclick=openCart;
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && drawer.classList.contains('open')) closeCart(); });

  // Prevent focus from leaving dialog when open
  document.addEventListener('focusin', (e)=>{
    if(!drawer.classList.contains('open')) return;
    if(!drawer.contains(e.target) && !totalBox.contains(e.target)){
      e.stopPropagation(); drawer.querySelector('button, [href], input, textarea')?.focus();
    }
  });

  // Clear all
  document.getElementById('clearCartBtn').onclick=()=>{ if(cart.length&&confirm('Xo√° t·∫•t c·∫£ m√≥n trong gi·ªè?')) clearCart(); };

  // ƒê·∫∑t ƒë∆°n h√†ng (mailto + fallback Gmail)
  const EMAIL_TO='vudo805@gmail.com';
  document.getElementById('checkoutBtn').onclick = ()=>{
  try{
    const cart = JSON.parse(localStorage.getItem('cart_phoga')||'[]');
    const packed = encodeURIComponent(JSON.stringify(cart));
    window.location.href = 'order.html#cart=' + packed;
  }catch{
    window.location.href = 'order.html';
  }
};

  // Button effect + chip fly (respect reduced motion)
  function clickAdd(btn, item){
  // Add to cart
  addToCart(item);
  btn.classList.add('flash'); setTimeout(()=>btn.classList.remove('flash'),300);

  // N·∫øu user b·∫≠t Reduce Motion -> v·∫´n hi·ªÉn th·ªã chip nh·ªè, b·ªè animation n·∫∑ng
  if (typeof PREFERS_REDUCED_MOTION !== 'undefined' && PREFERS_REDUCED_MOTION) {
    try { flyToCart(btn, item.name); } catch(e) {}
    return;
  }

  // Fly product image to cart button
  try{
    const imgEl = btn.closest('.card')?.querySelector('img.thumb');
    if(!imgEl) { flyToCart(btn, item.name); return; }
    const start = imgEl.getBoundingClientRect();
    const cartBtn = document.getElementById('openCartBtn');
    if(!cartBtn) { flyToCart(btn, item.name); return; }
    const end = cartBtn.getBoundingClientRect();
    const ghost = imgEl.cloneNode(true);
    ghost.className = 'fly-img';
    ghost.style.position = 'fixed';
    ghost.style.left = start.left + 'px';
    ghost.style.top = start.top + 'px';
    ghost.style.width = start.width + 'px';
    ghost.style.height = start.height + 'px';
    ghost.style.pointerEvents = 'none';
    document.body.appendChild(ghost);

    const dx = (end.left + end.width/2) - (start.left + start.width/2);
    const dy = (end.top + end.height/2) - (start.top + start.height/2);

    const anim = ghost.animate([
      { transform: 'translate(0,0) scale(1)', opacity: 1 },
      { transform: `translate(${dx}px, ${dy}px) scale(0.15)`, opacity: 0.15 }
    ], { duration: 800, easing: 'cubic-bezier(.22,.9,.25,1)', fill: 'forwards' });

    // Hi·ªán chip +1 ƒë·ªìng th·ªùi
    try { flyToCart(imgEl, item.name); } catch(e) {}

    anim.onfinish = ()=> ghost.remove();
  }catch(e){
    try { flyToCart(btn, item.name); } catch(_) {}
  }
}

function flyToCart(fromEl,label='1'){
    const s=fromEl.getBoundingClientRect(), e=openBtn.getBoundingClientRect();
    const chip=document.createElement('div'); chip.className='chip'; chip.textContent=`+1 ${label.split(' ')[0]}`; document.body.appendChild(chip);
    const sx=s.left+s.width/2, sy=s.top+s.height/2, ex=e.left+e.width/2, ey=e.top+e.height/2;
    chip.style.transform=`translate(${sx}px,${sy}px) scale(1)`;
    chip.animate([
      {transform:`translate(${sx}px,${sy}px) scale(1)`,opacity:1},
      {transform:`translate(${(sx+ex)/2}px,${sy-120}px) scale(.9)`,opacity:.9,offset:.6},
      {transform:`translate(${ex}px,${ey}px) scale(.6)`,opacity:0}
    ],{duration:900,easing:'cubic-bezier(.22,.9,.25,1)'}).onfinish=()=>chip.remove();
  }

  // Sync padding so last item not covered by total box
  const contentEl = document.querySelector('#drawer .content');
  function syncCartPadding(){
    if(!contentEl || !totalBox) return;
    const h = totalBox.offsetHeight || 0;
    contentEl.style.paddingBottom = (h + 16) + 'px';
  }
  window.addEventListener('resize', syncCartPadding);
  window.addEventListener('load', syncCartPadding);

  // Init
  renderMenu();
  renderCart();
})();
</script>

<!-- Modal ·∫£nh m√≥n ƒÉn -->
<div id="imgModal" style="position:fixed;inset:0;display:none;place-items:center;background:rgba(0,0,0,.6);z-index:1000">
  <div role="dialog" aria-modal="true" aria-label="Chi ti·∫øt m√≥n"
       style="background:#0f172a;color:#e5e7eb;max-width:min(720px,92vw);border-radius:14px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,.5)">
    <div style="display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-bottom:1px solid #1f2937">
      <strong id="mName"></strong>
      <button id="mClose" class="btn danger" aria-label="ƒê√≥ng">ƒê√≥ng</button>
    </div>
    <img id="mImg" alt="" style="width:100%;height:340px;object-fit:cover;background:#0b0b0b" />
    <div style="padding:12px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <span id="mPrice" style="font-weight:700"></span>
        <button id="mAdd" class="btn primary">ƒê·∫∑t m√≥n</button>
      </div>
      <div id="mDesc" style="color:#9aa0a6"></div>
    </div>
  </div>
</div>

<script>
// G·∫Øn click v√†o ·∫£nh ƒë·ªÉ m·ªü modal chi ti·∫øt
function bindImageClicks(){
  document.querySelectorAll('.card .thumb').forEach(img=>{
    if (img.dataset.bound === '1') return;
    img.dataset.bound = '1';
    img.style.cursor='zoom-in';
    img.addEventListener('click', ()=>{
      const card = img.closest('.card');
      const name = card?.querySelector('.name')?.textContent || '';
      const price = card?.querySelector('.price')?.textContent || '';
      const addBtn = card?.querySelector('.addBtn');
      const m = document.getElementById('imgModal');
      const mName = document.getElementById('mName');
      const mImg = document.getElementById('mImg');
      const mPrice = document.getElementById('mPrice');
      const mDesc = document.getElementById('mDesc');
      const mAdd = document.getElementById('mAdd');
      mName.textContent = name;
      mImg.src = img.currentSrc || img.src;
      mImg.alt = name;
      mPrice.textContent = price || '';
      mDesc.textContent = 'Th√†nh ph·∫ßn: ' + ((window.MENU||[]).find(x=>x.name===name)?.desc || 'ch∆∞a c√≥ th√¥ng tin');
      m.style.display = 'grid';
      m.dataset.open = '1';
      // ƒê·∫∑t m√≥n t·ª´ modal
      mAdd.onclick = ()=> addBtn?.click();
      document.getElementById('mClose').focus();
    });
  });
}

// ƒê√≥ng modal
(function(){
  const m = document.getElementById('imgModal');
  if (!m) return;
  const closeBtn = document.getElementById('mClose');
  function close(){ m.style.display='none'; m.dataset.open=''; }
  closeBtn?.addEventListener('click', close);
  m.addEventListener('click', (e)=>{ if(e.target===m) close(); });
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && m.dataset.open==='1') close(); });

  // T·ª± g·∫Øn l·∫°i khi DOM thay ƒë·ªïi (menu render l·∫°i)
  const obs = new MutationObserver(()=>bindImageClicks());
  obs.observe(document.body, { childList:true, subtree:true });
  // L·∫ßn ƒë·∫ßu
  if (document.readyState !== 'loading') bindImageClicks();
  else document.addEventListener('DOMContentLoaded', bindImageClicks);
})();
</script>

<script>
(function(){
  const a = document.getElementById('privacyLink');
  if(!a) return;
  a.addEventListener('click', function(e){
    // N·∫øu c√≥ JS n√†o ch·∫∑n m·∫∑c ƒë·ªãnh, ta v·∫´n ƒëi·ªÅu h∆∞·ªõng
    try{ e.preventDefault(); }catch(_){}
    window.location.assign('privacy_policy.html');
  });
})();
</script>

</body>
</html>
